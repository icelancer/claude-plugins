import { ItemCreateInput } from "@/types/item";
import { useState } from "react";

interface ItemFormProps {
    onSubmit: (data: ItemCreateInput) => Promise<boolean>;
}

export function ItemForm({ onSubmit }: ItemFormProps) {
    const [title, setTitle] = useState("");
    const [description, setDescription] = useState("");

    const handleSubmit = async (e: React.FormEvent) => {
        e.preventDefault();
        if (!title.trim()) return;

        const success = await onSubmit({ title, description: description || null });
        if (success) {
            setTitle("");
            setDescription("");
        }
    };

    return (
        <form onSubmit={handleSubmit} className="mb-8 bg-gray-50 dark:bg-zinc-900 p-4 rounded-xl border border-gray-200 dark:border-zinc-700">
            <h2 className="text-lg font-semibold mb-3 text-gray-800 dark:text-gray-200">Add New Item</h2>
            <div className="flex flex-col space-y-3">
                <input
                    type="text"
                    placeholder="Title (required)"
                    value={title}
                    onChange={(e) => setTitle(e.target.value)}
                    className="p-2 rounded border border-gray-300 dark:border-zinc-600 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white"
                />
                <input
                    type="text"
                    placeholder="Description (optional)"
                    value={description}
                    onChange={(e) => setDescription(e.target.value)}
                    className="p-2 rounded border border-gray-300 dark:border-zinc-600 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white"
                />
                <button
                    type="submit"
                    disabled={!title.trim()}
                    className="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg disabled:opacity-50 transition-colors"
                >
                    Add Item
                </button>
            </div>
        </form>
    );
}
